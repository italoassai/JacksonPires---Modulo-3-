namespace :dev do
  desc "Configura o ambiente de desenvolvimento"
  task setup: :environment do
    if Rails.env.development?
    show_spinner("Apagando BD.....") do
    %x(rails db:drop)
    end

    show_spinner("Criando DB....")  { %x(rails db:create) }
    show_spinner("Migrando BD.....") {%x(rails db:migrate)}
    %x(rails dev:add_mining_types)
    %x(rails dev:add_coins)
  else
    puts "Você não está no ambiente de desenvolvimento"
    end
  end


        desc "Configurando moedas"
        task add_coins: :environment do
          show_spinner("Cadastrando moedas .....") do
      coins = [
        {
        description:"Bitcoin",
        acronym:"BTC",
        url_image:"https://w7.pngwing.com/pngs/232/592/png-transparent-btc-crypto-cryptocurrency-cryptocurrencies-cash-money-bank-payment-icon-thumbnail.png",
        mining_type: MiningType.find_by(acronym: 'PoW')
      },

        {
        description:"Ethereum",
        acronym:"ETH",
        url_image:"https://img.freepik.com/psd-premium/icone-ethereum-3d_158757-1356.jpg",
        mining_type: MiningType.all.sample
      },

        {
        description:"Dash",
        acronym:"DASH",
          url_image:"data:image/jpeg;base64,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",
          mining_type: MiningType.all.sample
      }
      ]

      coins.each do |coin|
      Coin.find_or_create_by!(coin)

      end
     end
      end


      desc "Configurando moedas"
      task add_mining_types: :environment do
        show_spinner("Cadastrando tipos de mineração.....") do
        mining_types = [
        {description: "Proof of Work", acronym:"PoW"},
        {description:"Proof of Stake", acronym:"PoS"},
        {description:"Proof of capacity", acronym:"PoC"}

        ]

        mining_types.each do |mining_type|
          MiningType.find_or_create_by(mining_type)
        end
      end
      end


  private
  def show_spinner(msg_start, msg_end = "Concluído")
    spinner = TTY::Spinner.new("[:spinner] #{msg_start}", format: :arrow_pulse)
    spinner.auto_spin
    yield
    spinner.stop(("#{msg_end}"))
  end

end
